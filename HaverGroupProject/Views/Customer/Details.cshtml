@model HaverGroupProject.ViewModels.CustomerDetailsViewModel

@{
	ViewData["Title"] = "Customer Details";
}

<h1>Details</h1>

<div class="shadow-lg p-3 mb-5 bg-body-tertiary rounded">
	<div>
		<h4>Customer</h4>
		<hr />
		<dl class="row">
			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Customer.CustomerName)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Customer.CustomerName)
			</dd>

			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Customer.CustConSummary)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Customer.CustConSummary)
			</dd>

			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Customer.CustomerEmail)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Customer.CustomerEmail)
			</dd>

			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Customer.CustomerAddress)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Customer.CustomerAddress)
			</dd>

			<dt class="col-sm-2">
				@Html.DisplayNameFor(model => model.Customer.CustomerPhone)
			</dt>
			<dd class="col-sm-10">
				@Html.DisplayFor(model => model.Customer.CustomerPhone)
			</dd>
		</dl>
	</div>

	<!-- Active Orders Count Section -->
	<div class="alert @(Model.ActiveOrdersCount > 0 ? "alert-info" : "alert-warning")">
		<strong>Active Orders:</strong> @Model.ActiveOrdersCount
	</div>

	<!-- Display the details of each active order -->
	@if (Model.ActiveOrdersCount > 0)
	{
		<h5>Active Orders</h5>
		<ul class="list-group">
			@foreach (var order in Model.ActiveOrders)
			{
				<li class="list-group-item">
					<strong>Sales Order #:</strong> @order.SalesOrdNum
					<br />
					<strong>Kickoff Meeting:</strong> @order.KickoffMeeting.Value.ToShortDateString()
				</li>
			}
		</ul>
	}
	else
	{
		<p>No active orders for this customer.</p>
	}
</div>

<div>
	<a asp-action="Edit" asp-route-id="@Model.Customer?.ID" class="btn btn-primary">Edit</a> |
	<a asp-action="Index" class="btn btn-success">Back to List</a>
</div>
